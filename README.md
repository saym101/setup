# setup.sh
# Настройка Debian\Ubuntu при первой загрузке

### Для получения скрипта скопируйте 
```
wget://https://raw.githubusercontent.com/saym101/setup/main/setup.sh
```
Что умеет скрипт .

1. Меняет hostname
2. Меняет locale По умолчанию скрипт применяет ru_RU.UTF-8
3. Изменяем часовой пояс. По умолчанию скрипт примменяет - Europe/Moscow
4. Установка новых репозиториев xUSSR и обновление системы
   http://mirror.docker.ru/ для Debian систем 10,11,12,13 версий систем
   http://mirror.yandex.ru/ для Ubuntu систем 20.04 22.4 версий систем
6. Установка необходимого ПО
   Можно остаить как есть, можно изменить на свой, можно что то добавить или удалить. У каждого свой вкус.
   По умолчанию используется такой набор: curl gnupg  mc ufw htop iftop ntpdate ntp network-manager net-tools ca-certificates wget lynx language-pack-ru openssh-server openssh-client xclip
8. Настройка NTP сервиса
   Меняет сервера которые используются по умолчанию на эти:
   	pool 0.ru.pool.ntp.org
	pool 1.ru.pool.ntp.org
	pool 2.ru.pool.ntp.org
	pool 3.ru.pool.ntp.org
10. Настройка доступа root через SSH без пароля с ключом.
    Генерирует пару ключей. Прописывает публичный в .ssh/authorized_keys Путь можно сменить. Запрещает доступ а систему через пароль и открывает доступ по ключу.
    Поэтому надо осторожнее, что бы не потерять доступ к системе используя Putty\Kitty
12. Изменение порта для SSH. Настройка UFW
    Позволяет сменить текущий или используемый по умолчанию 22 порт SSH, на случайный из диапазона 1025-49150. Или применить свой любимый порт.
    Откройте новую сессию SSH с установленным новым портом и если получается подключится, выйдите из старой сессии и. перейдите для работы в новой.
14. Добавляем нового пользователя и создаём домашний каталог с папками. Домашней папке будут созданы следующие коталоги.
15. Можно закомментировать ненужное или добавить по аналогии свой.
  mkdir -p "$home_dir/.config"
  mkdir -p "$home_dir/.local"
  mkdir -p "$home_dir/.local/share"
  mkdir -p "$home_dir/Documents"
  mkdir -p "$home_dir/Download"
  mkdir -p "$home_dir/Backup"  
  mkdir -p "$home_dir/Music"
  mkdir -p "$home_dir/Pictures"
  mkdir -p "$home_dir/Video" 
16. Очищаем apt кэш.


04. перезапуск службы по ssh

05. [откройте новую оболочку и] ssh -p 42022 -i .ssh/privkey-name-здесь root@xx01.hello.world [и, если это сработает, выйдите из старой оболочки. Перейдите в новую оболочку]

06. перезагрузите компьютер

07. dpkg-перенастроить tzdata

08. apt update && apt install экран

09. screen # все команды с этого момента выполняются из внутреннего экрана

10. apt -y upgrade && apt -y dist-upgrade && apt-get -y автоматическое перемещение && перезагрузка

11.01. adduser <имя пользователя> # дважды введите надежный пароль в командной строке и верните все пустые значения

11.02. usermod -это имя пользователя sudo

11.03. пароль sudo -dl root

12. перезагрузка

13. установка sudo fail2ban ufw ntp git уже проверял

14. ограничение ufw 42022 && включение ufw

15. Готово!
